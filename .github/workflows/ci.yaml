name: Run CI

on:
  workflow_dispatch:

env:
  RUNS_ON: self-hosted
  DART_SDK: beta
    
jobs:
  test:
    name: Test
    environment: Production
    runs-on: ${{ github.env.RUNS_ON }}
    timeout-minutes: 5
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Dart SDK
        uses: dart-lang/setup-dart@v1
        with:
          sdk: ${{ github.env.DART_SDK }}

      - name: Dart Version
        run: dart --version

      - name: Run tests
        run: dart run test
